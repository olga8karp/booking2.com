<div class="jumbotron bg-white wrapper" style="min-width: 83vw;">
  <h2 class="font-weight-bold">{{ property?.name }}</h2>
  <p><img src="../assets/images/location.png"> {{ property?.address }}</p>

  <h4 class="font-weight-bold text-danger">${{ property?.price }}/night</h4>

  <p class="font-weight-bold" style="margin-bottom: 0"> Fits {{ property?.numberOfGuests }} people </p>

  <div class="wrapper">
    <img *ngIf="property?.propertyRating > 0" src="../../assets/images/star-icon.png">
    <img *ngIf="property?.propertyRating > 1" src="../../assets/images/star-icon.png">
    <img *ngIf="property?.propertyRating > 2" src="../../assets/images/star-icon.png">
    <img *ngIf="property?.propertyRating > 3" src="../../assets/images/star-icon.png">
    <img *ngIf="property?.propertyRating > 4" src="../../assets/images/star-icon.png">
  </div>

  <div class="carousel-container">
    <ngb-carousel>
      <ng-template ngbSlide *ngFor="let imageUrl of property?.uploads">
        <img [src]="imageUrl" alt="one image slide" class="image-slide">
      </ng-template>
      <ng-template ngbSlide *ngIf="!property?.uploads.length">
        <img src="../assets/images/no-image-available.jpg" alt="one image slide" class="image-slide">
      </ng-template>
    </ngb-carousel>
  </div>

  <div class="wrapper">
    <div class="list-group-container">
      <ul class="list-group">
        <li class="list-group-item bg-warning" *ngIf="property?.breakfast"> breakfast included </li>
        <li class="list-group-item bg-warning" *ngIf="property?.lunch"> lunch included </li>
        <li class="list-group-item bg-warning" *ngIf="property?.dinner"> dinner included </li>
        <li class="list-group-item bg-warning" *ngIf="property?.restaurant"> restaurant </li>
        <li class="list-group-item bg-warning" *ngIf="property?.kitchen"> kitchen facilities </li>
        <li class="list-group-item bg-warning" *ngIf="property?.parking"> parking </li>
        <li class="list-group-item bg-warning" *ngIf="property?.fitnessCenter"> fitness center </li>
        <li class="list-group-item bg-warning" *ngIf="property?.swimmingPool"> swimming pool </li>
        <li class="list-group-item bg-warning" *ngIf="property?.petFriendly"> pet friendly </li>
        <li class="list-group-item bg-warning" *ngIf="property?.chargingStation"> electric vehicle charging
          station </li>
      </ul>
    </div>
  </div>

  <div style="width:100%">
    <p>{{ property?.description }}</p>
    <div class="text-center wrapper">
      <button *ngIf="!isCalendarOpen" type="button" class="btn btn-danger font-weight-bold" (click)="toggleCalendar()">
        Book this property
      </button>
      <button *ngIf="isCalendarOpen" type="button" class="btn btn-primary font-weight-bold" (click)="toggleCalendar()">
        x
      </button>
    </div>
    <div *ngIf="isCalendarOpen">
      <form (ngSubmit)="bookForSelectedDates(bookingForm)" #bookingForm="ngForm">
        <div>
          <input type="text" name="name" class="form-control" style="width: 20rem; margin: 0 auto" placeholder="Your name" minlength="2" maxlength="30"
          [(ngModel)]="name"
          #nameInput="ngModel"
          [ngClass]="nameInput.invalid && nameInput.touched ? 'is-invalid' : nameInput.touched && nameInput.valid ? 'is-valid' : ''"
          required>
        </div>
        <br>
        <div>
            <input type="email" name="email" class="form-control" style="width: 20rem; margin: 0 auto" placeholder="Email" 
            pattern='^(([^()\[\]\.,;:\s@\"]+(\.[^()\[\]\.,;:\s@\"]+)*)|(\".+\"))@(([^()[\]\.,;:\s@\"]+\.)+[^()[\]\.,;:\s@\"]{2,})$'
            [(ngModel)]="email"
            #emailInput="ngModel"
            [ngClass]="emailInput.invalid && emailInput.touched ? 'is-invalid' : emailInput.touched && emailInput.valid ? 'is-valid' : ''"
            required>
        </div>
        <br>
        <div>
            <input type="text" name="phone" class="form-control" style="width: 20rem; margin: 0 auto" placeholder="Your phone number" pattern="\+?(9[976]\d|8[987530]\d|6[987]\d|5[90]\d|42\d|3[875]\d|
            2[98654321]\d|9[8543210]|8[6421]|6[6543210]|5[87654321]|
            4[987654310]|3[9643210]|2[70]|7|1)\d{1,14}$" 
            [(ngModel)]="phone"
            #phoneInput="ngModel"
            [ngClass]="phoneInput.invalid && phoneInput.touched ? 'is-invalid' : phoneInput.touched && phoneInput.valid ? 'is-valid' : ''"
            required>
        </div>
        <br>
        <div>
          <b2-date-picker name="bookedDates" 
          [(ngModel)]="bookedDates"
          #dateInput="ngModel">
          </b2-date-picker>
        </div>
        <div>
          <button type="submit" class="btn btn-danger font-weight-bold" [disabled]="!bookingForm.valid || !bookedDates"> Book for the selected dates
          </button>
        </div>
      </form>
    </div>
    <br>
    <hr>
    <div class="text-center wrapper">
      <button class="btn previous" (click)="goToPrevious(property?.timestamp)" [disabled]="goToPrevDisabled">&laquo; Previous</button>
      <button class="btn next" (click)="goToNext(property?.timestamp)" [disabled]="goToNextDisabled">Next &raquo;</button>
    </div>
    <div class="text-center wrapper">
      <button type="button" class="btn btn-secondary font-weight-bold" [routerLink]="['/listings', { lastVisited: property?.timestamp }]"> Back to all search results
      </button>
    </div>
  </div>
</div>